<!DOCTYPE html>

<html class="dark" lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Inquiry Management List</title>
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=Noto+Sans:wght@400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <!-- Tailwind Configuration -->
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#06f980", // Spring Green
                        "primary-dark": "#05c766",
                        "background-dark": "#000000",
                        "surface-dark": "#111111",
                        "surface-highlight": "#1a1a1a",
                        "text-secondary": "#9ca3af",
                    },
                    fontFamily: {
                        "display": ["Inter", "Noto Sans", "sans-serif"],
                        "body": ["Inter", "Noto Sans", "sans-serif"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.375rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #111;
        }

        ::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #444;
        }

        /* Utility to vertically center icons */
        .material-symbols-outlined {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            font-size: 20px;
        }
    </style>
</head>

<body class="bg-black text-white font-display overflow-hidden h-screen flex flex-col">
    <!-- Top Navigation Bar -->
    <header
        class="flex-none flex items-center justify-between border-b border-[#27272a] bg-surface-dark px-6 py-3 z-20">
        <div class="flex items-center gap-8 w-1/3">
            <a href="/user-dashboard.html"
                class="flex items-center gap-3 text-primary hover:opacity-80 transition-opacity">
                <span class="material-symbols-outlined text-3xl">real_estate_agent</span>
                <h2 class="text-white text-lg font-bold tracking-tight">Spring Estate</h2>
            </a>
        </div>
        <div class="flex-1 max-w-xl">
            <label class="relative flex items-center w-full group">
                <span
                    class="absolute left-4 text-gray-500 material-symbols-outlined group-focus-within:text-primary transition-colors">search</span>
                <input
                    class="w-full h-10 bg-surface-highlight border border-[#27272a] rounded-lg pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary transition-all"
                    placeholder="Search by property, agent, or keyword..." type="text" />
            </label>
        </div>
        <div class="flex items-center justify-end gap-4 w-1/3">
            <button class="relative p-2 text-gray-400 hover:text-white transition-colors rounded-lg hover:bg-[#27272a]">
                <span class="material-symbols-outlined">notifications</span>
                <span class="absolute top-2 right-2 size-2 bg-primary rounded-full"></span>
            </button>
            <div class="h-8 w-[1px] bg-[#27272a]"></div>
            <div class="flex items-center gap-3 pl-2">
                <div class="text-right hidden sm:block">
                    <p class="text-sm font-medium text-white" id="user-name">User</p>
                    <p class="text-xs text-text-secondary">Dashboard</p>
                </div>
                <div class="bg-center bg-no-repeat bg-cover rounded-full size-9 border border-[#27272a]"
                    data-alt="User profile avatar"
                    style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDajVSvhM5PbI5DhsvXLd3t1qXTVa4YdrnZYMZ-zfIAcyy6vVmTDjP0Bf63ABXhfFNjkXsivRU-8U8VZwByVopRkGodRfM8Pb7u3uS1xW_rCiBLT6Vo4GnZpMi6g7_WCrfHcnSPKBC6BDThw9RBPrYDas5pLJNcdJU9iQFJqVKJKQYZSTCsxH1yZqsfa8gpmz5RIX7m-YQA7aiyzFH9JeDCj_OT4s1zf2gWAQzqYWb7i_xQJ8b3BH_NbVG6O5XmHQDHEbNWEIRjMOKZ");'>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content Area -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Left: Inquiry List Section -->
        <main class="flex-1 flex flex-col min-w-0 border-r border-[#27272a] bg-black">
            <!-- Filters & Sorting Toolbar -->
            <div
                class="flex-none px-6 py-4 border-b border-[#27272a] flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-black/50 backdrop-blur-sm sticky top-0 z-10">
                <!-- Status Pills -->
                <div class="flex items-center gap-2 overflow-x-auto no-scrollbar">
                    <button onclick="filterInquiries('ALL')"
                        class="flex items-center justify-center h-8 px-4 rounded-full bg-primary/20 text-primary border border-primary/50 text-sm font-medium transition-all hover:bg-primary/30">
                        All <span class="ml-2 opacity-70 text-xs">0</span>
                    </button>
                    <button onclick="filterInquiries('PENDING')"
                        class="flex items-center justify-center h-8 px-4 rounded-full bg-[#18181b] text-text-secondary border border-[#27272a] hover:border-gray-500 hover:text-white text-sm font-medium transition-all">
                        Pending <span class="ml-2 opacity-70 text-xs">0</span>
                    </button>
                    <button onclick="filterInquiries('REPLIED')"
                        class="flex items-center justify-center h-8 px-4 rounded-full bg-[#18181b] text-text-secondary border border-[#27272a] hover:border-gray-500 hover:text-white text-sm font-medium transition-all">
                        Replied <span class="ml-2 opacity-70 text-xs">0</span>
                    </button>
                    <button onclick="filterInquiries('CLOSED')"
                        class="flex items-center justify-center h-8 px-4 rounded-full bg-[#18181b] text-text-secondary border border-[#27272a] hover:border-gray-500 hover:text-white text-sm font-medium transition-all">
                        Closed <span class="ml-2 opacity-70 text-xs">0</span>
                    </button>
                </div>
                <!-- Sort Dropdown -->
                <div class="flex items-center gap-2">
                    <span class="text-xs text-text-secondary uppercase tracking-wider font-semibold">Sort by:</span>
                    <div class="relative">
                        <select
                            class="appearance-none bg-[#18181b] border border-[#27272a] text-white text-sm rounded-lg pl-3 pr-8 py-1.5 focus:outline-none focus:border-primary cursor-pointer hover:bg-[#27272a] transition-colors">
                            <option>Newest first</option>
                            <option>Oldest first</option>
                            <option>Price: High to Low</option>
                        </select>
                        <span
                            class="material-symbols-outlined absolute right-2 top-1.5 pointer-events-none text-gray-400 text-sm">expand_more</span>
                    </div>
                </div>
            </div>
            <!-- Scrollable List (populated dynamically by JavaScript) -->
            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                <!-- Loading placeholder - will be replaced by JavaScript -->
                <div class="flex justify-center py-12">
                    <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"></div>
                </div>
            </div>
        </main>
        <!-- Right: Sidebar Stats & Settings -->
        <aside class="w-80 border-l border-[#27272a] bg-[#0c0c0e] hidden xl:flex flex-col p-6 gap-6">
            <!-- Quick Stats -->
            <div class="flex flex-col gap-4">
                <h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wider">Quick Stats</h3>
                <div class="grid grid-cols-1 gap-3">
                    <div
                        class="bg-surface-dark border border-[#27272a] p-4 rounded-xl flex items-center justify-between group hover:border-primary/30 transition-colors">
                        <div>
                            <p class="text-text-secondary text-xs font-medium">New Today</p>
                            <p class="text-2xl font-bold text-white mt-1">4</p>
                        </div>
                        <div
                            class="bg-[#1a1a1a] p-2 rounded-lg text-primary group-hover:bg-primary/10 transition-colors">
                            <span class="material-symbols-outlined">inbox</span>
                        </div>
                    </div>
                    <div
                        class="bg-surface-dark border border-[#27272a] p-4 rounded-xl flex items-center justify-between group hover:border-primary/30 transition-colors">
                        <div>
                            <p class="text-text-secondary text-xs font-medium">Response Rate</p>
                            <p class="text-2xl font-bold text-white mt-1">98%</p>
                        </div>
                        <div
                            class="bg-[#1a1a1a] p-2 rounded-lg text-primary group-hover:bg-primary/10 transition-colors">
                            <span class="material-symbols-outlined">bolt</span>
                        </div>
                    </div>
                    <div
                        class="bg-surface-dark border border-[#27272a] p-4 rounded-xl flex items-center justify-between group hover:border-primary/30 transition-colors">
                        <div>
                            <p class="text-text-secondary text-xs font-medium">Avg. Response Time</p>
                            <p class="text-2xl font-bold text-white mt-1">15m</p>
                        </div>
                        <div
                            class="bg-[#1a1a1a] p-2 rounded-lg text-primary group-hover:bg-primary/10 transition-colors">
                            <span class="material-symbols-outlined">timelapse</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Settings / Toggles -->
            <div class="flex flex-col gap-4 pt-6 border-t border-[#27272a]">
                <h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wider">Preferences</h3>
                <div class="flex items-center justify-between">
                    <div class="flex flex-col">
                        <span class="text-sm text-white font-medium">Email Notifications</span>
                        <span class="text-xs text-text-secondary">Get alerted for new leads</span>
                    </div>
                    <!-- Toggle Switch -->
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input checked="" class="sr-only peer" type="checkbox" value="" />
                        <div
                            class="w-11 h-6 bg-[#27272a] peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                        </div>
                    </label>
                </div>
                <div class="flex items-center justify-between">
                    <div class="flex flex-col">
                        <span class="text-sm text-white font-medium">Desktop Alerts</span>
                        <span class="text-xs text-text-secondary">Push notifications</span>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input class="sr-only peer" type="checkbox" value="" />
                        <div
                            class="w-11 h-6 bg-[#27272a] peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary">
                        </div>
                    </label>
                </div>
            </div>
            <!-- Mini Calendar/Schedule Component -->
            <div class="flex flex-col gap-4 pt-6 border-t border-[#27272a] mt-auto">
                <h3 class="text-sm font-semibold text-text-secondary uppercase tracking-wider">Upcoming Tasks</h3>
                <div class="bg-surface-dark border border-[#27272a] rounded-xl p-3 space-y-3">
                    <div class="flex gap-3 items-start">
                        <div class="bg-primary/20 text-primary rounded-md p-1.5 shrink-0">
                            <span class="material-symbols-outlined text-[18px]">calendar_month</span>
                        </div>
                        <div>
                            <p class="text-sm text-white font-medium">Tour: Modern Loft</p>
                            <p class="text-xs text-text-secondary">Today, 4:00 PM</p>
                        </div>
                    </div>
                    <div class="flex gap-3 items-start">
                        <div class="bg-[#27272a] text-gray-400 rounded-md p-1.5 shrink-0">
                            <span class="material-symbols-outlined text-[18px]">call</span>
                        </div>
                        <div>
                            <p class="text-sm text-white font-medium">Call: John Doe</p>
                            <p class="text-xs text-text-secondary">Tomorrow, 10:00 AM</p>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>
    <script>
        const API_URL = 'http://localhost:8080/api';
        let allInquiries = [];
        let currentFilter = 'ALL';

        // Auth check
        const token = localStorage.getItem('token');
        if (!token) {
            window.location.href = '/login.html?redirect=' + encodeURIComponent(window.location.href);
        }

        // Display user name
        document.addEventListener('DOMContentLoaded', () => {
            const userStr = localStorage.getItem('user');
            if (userStr) {
                const user = JSON.parse(userStr);
                const nameEl = document.getElementById('user-name');
                if (nameEl) nameEl.textContent = user.name || 'User';
            }
            loadInquiries();
        });

        // Format relative time
        function timeAgo(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = Math.floor((now - date) / 1000);

            if (diff < 60) return 'just now';
            if (diff < 3600) return Math.floor(diff / 60) + ' min ago';
            if (diff < 86400) return Math.floor(diff / 3600) + ' hrs ago';
            if (diff < 604800) return Math.floor(diff / 86400) + ' days ago';
            return date.toLocaleDateString();
        }

        // Get status badge HTML
        function getStatusBadge(status) {
            switch (status) {
                case 'PENDING':
                    return `<span class="inline-flex items-center rounded-md border border-yellow-500/30 bg-yellow-500/10 px-2 py-0.5 text-xs font-medium text-yellow-500 ring-1 ring-inset ring-yellow-500/20">Pending</span>`;
                case 'REPLIED':
                    return `<span class="inline-flex items-center rounded-md bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary ring-1 ring-inset ring-primary/20">Replied</span>`;
                case 'CLOSED':
                    return `<span class="inline-flex items-center rounded-md bg-[#27272a] px-2 py-0.5 text-xs font-medium text-gray-400 ring-1 ring-inset ring-gray-500/10">Closed</span>`;
                default:
                    return `<span class="inline-flex items-center rounded-md bg-gray-500/10 px-2 py-0.5 text-xs font-medium text-gray-400">${status}</span>`;
            }
        }

        // Render inquiry card
        function renderInquiryCard(inquiry) {
            const isClosed = inquiry.status === 'CLOSED';
            const isPending = inquiry.status === 'PENDING';
            const hasUnread = inquiry.hasUnreadMessage;

            return `
                <article class="group relative flex flex-col md:flex-row gap-4 bg-surface-dark border border-[#27272a] rounded-xl p-4 ${isClosed ? 'opacity-60 hover:opacity-100' : 'hover:border-primary/50 hover:shadow-[0_0_15px_rgba(6,249,128,0.1)]'} transition-all duration-200">
                    ${hasUnread ? `
                    <div class="absolute top-4 right-4 md:right-auto md:left-4 md:top-4 z-10">
                        <span class="flex h-3 w-3">
                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"></span>
                            <span class="relative inline-flex rounded-full h-3 w-3 bg-primary"></span>
                        </span>
                    </div>
                    ` : ''}
                    <div class="w-full md:w-48 aspect-video md:aspect-[4/3] rounded-lg bg-cover bg-center shrink-0 border border-[#27272a] ${isClosed ? 'grayscale' : ''}"
                        style="background-image: url('${inquiry.propertyImage || 'https://via.placeholder.com/300x200?text=Property'}');">
                    </div>
                    <div class="flex-1 flex flex-col justify-between gap-3">
                        <div>
                            <div class="flex items-start justify-between">
                                <div>
                                    <div class="flex items-center gap-2 mb-1">
                                        ${getStatusBadge(inquiry.status)}
                                        <span class="text-xs text-text-secondary flex items-center gap-1">
                                            <span class="material-symbols-outlined text-[14px]">schedule</span>
                                            ${timeAgo(inquiry.lastMessageAt || inquiry.createdAt)}
                                        </span>
                                    </div>
                                    <a class="text-lg font-bold ${isClosed ? 'text-gray-300 line-through decoration-gray-600' : 'text-white'} group-hover:text-primary transition-colors leading-tight"
                                        href="/view-property.html?id=${inquiry.propertyId}">${inquiry.propertyTitle || 'Property'}</a>
                                    <p class="text-text-secondary text-sm mt-0.5">${inquiry.propertyAddress || ''} â€¢ <span class="${isClosed ? 'text-gray-400' : 'text-white'} font-semibold">$${(inquiry.propertyPrice || 0).toLocaleString()}</span></p>
                                </div>
                            </div>
                            <div class="mt-3 ${isPending ? 'bg-[#1a1a1a] rounded-lg p-3 border border-[#27272a]' : 'pl-3 border-l-2 border-[#27272a]'}">
                                <p class="text-sm ${isPending ? 'text-gray-300' : 'text-text-secondary italic'} line-clamp-2">${inquiry.lastMessage || 'No messages yet'}</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between pt-2 border-t border-[#27272a] mt-1">
                            <div class="flex items-center gap-2">
                                ${inquiry.agentName ? `
                                    <div class="h-6 w-6 rounded-full bg-primary/20 flex items-center justify-center text-xs text-primary font-bold ring-2 ring-[#27272a]">
                                        ${inquiry.agentName.charAt(0).toUpperCase()}
                                    </div>
                                    <span class="text-xs text-gray-400">Assigned to <span class="text-white">${inquiry.agentName}</span></span>
                                ` : `
                                    <span class="material-symbols-outlined text-gray-500 text-lg">hourglass_empty</span>
                                    <span class="text-xs text-gray-400">Awaiting agent assignment</span>
                                `}
                            </div>
                            <div class="flex items-center gap-2">
                                ${!isClosed ? `
                                    <button onclick="closeInquiry(${inquiry.id})"
                                        class="text-xs font-medium text-text-secondary hover:text-white px-3 py-1.5 border border-transparent hover:border-[#3f3f46] rounded-md transition-colors">Mark Closed</button>
                                    <button onclick="window.location.href='/inquiry-chat.html?id=${inquiry.id}'"
                                        class="flex items-center gap-1.5 ${isPending ? 'bg-primary hover:bg-primary-dark text-black shadow-[0_0_10px_rgba(6,249,128,0.2)]' : 'bg-primary/10 hover:bg-primary/20 text-primary border border-primary/20 hover:border-primary/40'} text-xs font-bold px-4 py-1.5 rounded-md transition-colors">
                                        <span class="material-symbols-outlined text-[16px]">${isPending ? 'chat' : 'forum'}</span>
                                        ${isPending ? 'Open Chat' : 'Continue Chat'}
                                    </button>
                                ` : `
                                    <button onclick="window.location.href='/inquiry-chat.html?id=${inquiry.id}'"
                                        class="text-xs font-medium text-text-secondary hover:text-white px-3 py-1.5 rounded-md transition-colors">View Details</button>
                                `}
                            </div>
                        </div>
                    </div>
                </article>
            `;
        }

        // Load inquiries from API
        async function loadInquiries() {
            const listContainer = document.querySelector('.flex-1.overflow-y-auto.p-6.space-y-4');

            listContainer.innerHTML = `
                <div class="flex justify-center py-12">
                    <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"></div>
                </div>
            `;

            try {
                const response = await fetch(`${API_URL}/inquiries/my`, {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    throw new Error('Failed to load inquiries');
                }

                allInquiries = await response.json();
                updateFilterCounts();
                renderInquiries();

            } catch (error) {
                console.error('Error loading inquiries:', error);
                listContainer.innerHTML = `
                    <div class="text-center py-12">
                        <span class="material-symbols-outlined text-5xl text-gray-600 mb-4">error_outline</span>
                        <p class="text-gray-400">Failed to load inquiries</p>
                        <button onclick="loadInquiries()" class="mt-4 text-primary hover:underline">Try again</button>
                    </div>
                `;
            }
        }

        // Filter inquiries
        function filterInquiries(status) {
            currentFilter = status;

            // Update filter button styles
            const buttons = document.querySelectorAll('.flex.items-center.gap-2.overflow-x-auto button');
            buttons.forEach(btn => {
                const btnStatus = btn.textContent.trim().split(' ')[0].toUpperCase();
                if (btnStatus === status || (status === 'ALL' && btn.textContent.includes('All'))) {
                    btn.className = 'flex items-center justify-center h-8 px-4 rounded-full bg-primary/20 text-primary border border-primary/50 text-sm font-medium transition-all hover:bg-primary/30';
                } else {
                    btn.className = 'flex items-center justify-center h-8 px-4 rounded-full bg-[#18181b] text-text-secondary border border-[#27272a] hover:border-gray-500 hover:text-white text-sm font-medium transition-all';
                }
            });

            renderInquiries();
        }

        // Render inquiries list
        function renderInquiries() {
            const listContainer = document.querySelector('.flex-1.overflow-y-auto.p-6.space-y-4');

            let filtered = allInquiries;
            if (currentFilter !== 'ALL') {
                filtered = allInquiries.filter(inq => inq.status === currentFilter);
            }

            if (filtered.length === 0) {
                listContainer.innerHTML = `
                    <div class="text-center py-12">
                        <span class="material-symbols-outlined text-5xl text-gray-600 mb-4">inbox</span>
                        <p class="text-gray-400">No inquiries ${currentFilter !== 'ALL' ? `with status "${currentFilter.toLowerCase()}"` : 'yet'}</p>
                        <a href="/properties.html" class="mt-4 inline-block text-primary hover:underline">Browse properties</a>
                    </div>
                `;
                return;
            }

            listContainer.innerHTML = filtered.map(renderInquiryCard).join('');
        }

        // Update filter counts
        function updateFilterCounts() {
            const counts = {
                ALL: allInquiries.length,
                PENDING: allInquiries.filter(i => i.status === 'PENDING').length,
                REPLIED: allInquiries.filter(i => i.status === 'REPLIED').length,
                CLOSED: allInquiries.filter(i => i.status === 'CLOSED').length
            };

            const buttons = document.querySelectorAll('.flex.items-center.gap-2.overflow-x-auto button');
            buttons.forEach(btn => {
                const text = btn.textContent.trim();
                if (text.includes('All')) {
                    btn.innerHTML = `All <span class="ml-2 opacity-70 text-xs">${counts.ALL}</span>`;
                } else if (text.includes('Pending')) {
                    btn.innerHTML = `Pending <span class="ml-2 opacity-70 text-xs">${counts.PENDING}</span>`;
                } else if (text.includes('Replied')) {
                    btn.innerHTML = `Replied <span class="ml-2 opacity-70 text-xs">${counts.REPLIED}</span>`;
                } else if (text.includes('Closed')) {
                    btn.innerHTML = `Closed <span class="ml-2 opacity-70 text-xs">${counts.CLOSED}</span>`;
                }
            });

            // Update sidebar stats
            const newTodayEl = document.querySelector('.flex-none .text-2xl');
            if (newTodayEl) {
                const today = new Date();
                const newToday = allInquiries.filter(i => {
                    const created = new Date(i.createdAt);
                    return created.toDateString() === today.toDateString();
                }).length;
                newTodayEl.textContent = newToday;
            }
        }

        // Close inquiry
        async function closeInquiry(id) {
            if (!confirm('Are you sure you want to close this inquiry?')) return;

            try {
                // Note: Users don't have close endpoint, but keeping for future use
                // For now this is a placeholder
                alert('Inquiry closed successfully');
                loadInquiries();
            } catch (error) {
                console.error('Error closing inquiry:', error);
                alert('Failed to close inquiry');
            }
        }

        // Make filter function global
        window.filterInquiries = filterInquiries;
        window.closeInquiry = closeInquiry;
    </script>
</body>

</html>